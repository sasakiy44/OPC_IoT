# ESP32-C3M-TRY用 LEDパーキングセンサー

## 概要

このプロジェクトは、ESP32-C3M-TRYボード、超音波距離センサー、RGB LED、OLEDディスプレイを使用して、簡易的なパーキングセンサーを作成するためのMicroPythonスクリプトです。
距離に応じてLEDの色が変化し、OLEDディスプレイに距離と警告バーが表示されます。

## 機能

- 超音波センサーで物体との距離を測定します。
- 測定した距離をOLEDディスプレイに数値とバーグラフィックで表示します。
- 距離に応じてRGB LEDの色が3段階（緑・黄・赤）に変化して警告します。
  - **遠距離:** 緑色に点灯
  - **中距離:** 黄色に点灯
  - **近距離:** 赤色に点灯（または点滅）

## 必要なもの (ハードウェア)

- ESP32-C3M-TRY 開発ボード
- 超音波距離センサー (HC-SR04など)
- RGB LED (NeoPixel互換, 例: WS2812B)
- OLEDディスプレイ (SSD1306, I2C接続, 128x64)
- ブレッドボードとジャンパーワイヤー

## 接続 (ピン配置)

スクリプトは以下のピン配置を想定しています。

| コンポーネント       | ピン名 | ESP32-C3M-TRY GPIO |
| -------------------- | ------ | ------------------ |
| RGB LED              | DIN    | `GPIO10`           |
| 超音波センサー       | TRIG   | `GPIO4`            |
|                      | ECHO   | `GPIO5`            |
| OLEDディスプレイ     | SCL    | `GPIO9`            |
|                      | SDA    | `GPIO8`            |

## セットアップ (ライブラリ)

このスクリプトを実行するには、MicroPythonファームウェアと以下のライブラリがESP32ボードにインストールされている必要があります。

- `neopixel`
- `ssd1306`

*Thonny IDEなどの開発環境を使用している場合、ツールメニューからこれらのライブラリを検索して簡単にインストールできます。*

## 使い方

1. 上記の通りにハードウェアを配線します。
2. `OPC_student_handouts_TRY.py` ファイルをESP32ボードに転送します。
3. スクリプトを実行すると、距離測定が開始されます。

## カスタマイズ

`OPC_student_handouts_TRY.py` 内の以下の変数を変更することで、センサーの挙動を簡単にカスタマイズできます。

- **LEDの輝度調整:**
  - `BRIGHTNESS = 0.2` の値を `0.0` (消灯) から `1.0` (最大輝度) の範囲で変更します。

- **距離の閾値変更:**
  - `if distance < 10:`: 赤色LEDが点灯する距離(cm)を変更します。
  - `elif 10 <= distance <= 50:`: 黄色LEDが点灯する距離(cm)の範囲を変更します。

- **測定間隔の変更:**
  - `time.sleep(0.5)` の値(秒)を変更して、測定の頻度を調整します。

- **赤色LEDの点滅:**
  - `if distance < 10:` のブロック内で、`#blink_red()` の行のコメントを解除すると、近距離警告が点灯から点滅に変わります。